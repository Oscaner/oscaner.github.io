<!-- Comment start -->
<div class="comment">
  {% if site.disqus_enable %}
  <!-- disqus 评论框 start -->
  <div id="disqus_thread" class="disqus-thread"></div>
  <!-- disqus 评论框 end -->
  {% endif %}

  {% if site.gitalk_enable %}
  <!-- gitalk 评论框 start -->
  <div id='gitalk-container'></div>
  <!-- gitalk 评论框 end -->
  {% endif %}
</div>
<!-- Comment end -->


{% if site.disqus_enable %}
<!-- disqus 公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "{{ site.disqus_username }}";
    var disqus_identifier = "{{ site.disqus_username }}/{{ page.url }}";
    var disqus_url = "{{ site.url }}{{ page.url }}";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus 公共JS代码 end -->
{% endif %}


{% if site.gitalk_enable %}
<!-- gitalk 公共JS代码 start (一个网页只需插入一次) -->
<script src="//unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script type="text/javascript">
  function getLangForGitalk() {
    lang = new URLSearchParams(document.location.search).get("lang");
    return lang == 'zh' ? 'zh-CN' : lang;
  }

  var body = location.href;

  var subtitle = "{{ page.subtitle }}";
  if (subtitle) {
    body += "\n" + subtitle;
  }

  var description = "{{ page.description }}";
  if (description) {
    body += "\n" + description;
  }

  var gitalk = new Gitalk({
      clientID: '{{ site.gitalk_client_id }}',
      clientSecret: '{{ site.gitalk_client_secret }}',
      repo: '{{ site.gitalk_repo }}',
      owner: '{{ site.gitalk_owner }}',
      admin: '{{ site.gitalk_admin }}',
      labels: 'Gitalk|{{ page.tags | join: "|" }}|{{ site.github_username }}'.split('|'),
      body: body,
      language: getLangForGitalk() ? getLangForGitalk() : 'zh-CN',

      id: MD5('{{ page.url }}'),
      // facebook-like distraction free mode
      distractionFreeMode: true
  });

  gitalk.render('gitalk-container');
</script>
<!-- gitalk 公共JS代码 end -->
{% endif %}
